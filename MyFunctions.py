import re

def html_ascii_convert(text):
    text = text.replace('&#32;', ' ')
    text = text.replace('&#33;', '!')
    text = text.replace('&#34;', '"')
    text = text.replace('&#35;', '#')
    text = text.replace('&#36;', '$')
    text = text.replace('&#37;', '%')
    text = text.replace('&#38;', '&')
    text = text.replace('&#39;', "'")
    text = text.replace('&#40;', '(')
    text = text.replace('&#41;', ')')
    text = text.replace('&#42;', '*')
    text = text.replace('&#43;', '+')
    text = text.replace('&#44;', ',')
    text = text.replace('&#45;', '-')
    text = text.replace('&#46;', '.')
    text = text.replace('&#47;', '/')
    text = text.replace('&#48;', '0')
    text = text.replace('&#49;', '1')
    text = text.replace('&#50;', '2')
    text = text.replace('&#51;', '3')
    text = text.replace('&#52;', '4')
    text = text.replace('&#53;', '5')
    text = text.replace('&#54;', '6')
    text = text.replace('&#55;', '7')
    text = text.replace('&#56;', '8')
    text = text.replace('&#57;', '9')
    text = text.replace('&#58;', ':')
    text = text.replace('&#59;', ';')
    text = text.replace('&#60;', '<')
    text = text.replace('&#61;', '=')
    text = text.replace('&#62;', '>')
    text = text.replace('&#63;', '?')
    text = text.replace('&#64;', '@')
    text = text.replace('&#65;', 'A')
    text = text.replace('&#66;', 'B')
    text = text.replace('&#67;', 'C')
    text = text.replace('&#68;', 'D')
    text = text.replace('&#69;', 'E')
    text = text.replace('&#70;', 'F')
    text = text.replace('&#71;', 'G')
    text = text.replace('&#72;', 'H')
    text = text.replace('&#73;', 'I')
    text = text.replace('&#74;', 'J')
    text = text.replace('&#75;', 'K')
    text = text.replace('&#76;', 'L')
    text = text.replace('&#77;', 'M')
    text = text.replace('&#78;', 'N')
    text = text.replace('&#79;', 'O')
    text = text.replace('&#80;', 'P')
    text = text.replace('&#81;', 'Q')
    text = text.replace('&#82;', 'R')
    text = text.replace('&#83;', 'S')
    text = text.replace('&#84;', 'T')
    text = text.replace('&#85;', 'U')
    text = text.replace('&#86;', 'V')
    text = text.replace('&#87;', 'W')
    text = text.replace('&#88;', 'X')
    text = text.replace('&#89;', 'Y')
    text = text.replace('&#90;', 'Z')
    text = text.replace('&#91;', '[')
    text = text.replace('&#92;', '\\')
    text = text.replace('&#93;', ']')
    text = text.replace('&#94;', '^')
    text = text.replace('&#95;', '_')
    text = text.replace('&#96;', ' ')
    text = text.replace('&#97;', 'a')
    text = text.replace('&#98;', 'b')
    text = text.replace('&#99;', 'c')
    text = text.replace('&#032;', ' ')
    text = text.replace('&#033;', '!')
    text = text.replace('&#034;', '"')
    text = text.replace('&#035;', '#')
    text = text.replace('&#036;', '$')
    text = text.replace('&#037;', '%')
    text = text.replace('&#038;', '&')
    text = text.replace('&#039;', "'")
    text = text.replace('&#040;', '(')
    text = text.replace('&#041;', ')')
    text = text.replace('&#042;', '*')
    text = text.replace('&#043;', '+')
    text = text.replace('&#044;', ',')
    text = text.replace('&#045;', '-')
    text = text.replace('&#046;', '.')
    text = text.replace('&#047;', '/')
    text = text.replace('&#048;', '0')
    text = text.replace('&#049;', '1')
    text = text.replace('&#050;', '2')
    text = text.replace('&#051;', '3')
    text = text.replace('&#052;', '4')
    text = text.replace('&#053;', '5')
    text = text.replace('&#054;', '6')
    text = text.replace('&#055;', '7')
    text = text.replace('&#056;', '8')
    text = text.replace('&#057;', '9')
    text = text.replace('&#058;', ':')
    text = text.replace('&#059;', ';')
    text = text.replace('&#060;', '<')
    text = text.replace('&#061;', '=')
    text = text.replace('&#062;', '>')
    text = text.replace('&#063;', '?')
    text = text.replace('&#064;', '@')
    text = text.replace('&#065;', 'A')
    text = text.replace('&#066;', 'B')
    text = text.replace('&#067;', 'C')
    text = text.replace('&#068;', 'D')
    text = text.replace('&#069;', 'E')
    text = text.replace('&#070;', 'F')
    text = text.replace('&#071;', 'G')
    text = text.replace('&#072;', 'H')
    text = text.replace('&#073;', 'I')
    text = text.replace('&#074;', 'J')
    text = text.replace('&#075;', 'K')
    text = text.replace('&#076;', 'L')
    text = text.replace('&#077;', 'M')
    text = text.replace('&#078;', 'N')
    text = text.replace('&#079;', 'O')
    text = text.replace('&#080;', 'P')
    text = text.replace('&#081;', 'Q')
    text = text.replace('&#082;', 'R')
    text = text.replace('&#083;', 'S')
    text = text.replace('&#084;', 'T')
    text = text.replace('&#085;', 'U')
    text = text.replace('&#086;', 'V')
    text = text.replace('&#087;', 'W')
    text = text.replace('&#088;', 'X')
    text = text.replace('&#089;', 'Y')
    text = text.replace('&#090;', 'Z')
    text = text.replace('&#091;', '[')
    text = text.replace('&#092;', '\\')
    text = text.replace('&#093;', ']')
    text = text.replace('&#094;', '^')
    text = text.replace('&#095;', '_')
    text = text.replace('&#096;', ' ')
    text = text.replace('&#097;', 'a')
    text = text.replace('&#098;', 'b')
    text = text.replace('&#099;', 'c')
    text = text.replace('&#100;', 'd')
    text = text.replace('&#101;', 'e')
    text = text.replace('&#102;', 'f')
    text = text.replace('&#103;', 'g')
    text = text.replace('&#104;', 'h')
    text = text.replace('&#105;', 'i')
    text = text.replace('&#106;', 'j')
    text = text.replace('&#107;', 'k')
    text = text.replace('&#108;', 'l')
    text = text.replace('&#109;', 'm')
    text = text.replace('&#110;', 'n')
    text = text.replace('&#111;', 'o')
    text = text.replace('&#112;', 'p')
    text = text.replace('&#113;', 'q')
    text = text.replace('&#114;', 'r')
    text = text.replace('&#115;', 's')
    text = text.replace('&#116;', 't')
    text = text.replace('&#117;', 'u')
    text = text.replace('&#118;', 'v')
    text = text.replace('&#119;', 'w')
    text = text.replace('&#120;', 'x')
    text = text.replace('&#121;', 'y')
    text = text.replace('&#122;', 'z')
    text = text.replace('&#123;', '{')
    text = text.replace('&#124;', '|')
    text = text.replace('&#125;', '}')
    text = text.replace('&#126;', '~')
    text = text.replace('&#127;', ' ')
    text = text.replace('&#128;', '?')
    text = text.replace('&#129;', ' ')
    text = text.replace('&#130;', ',')
    text = text.replace('&#131;', 'f')
    text = text.replace('&#132;', '"')
    text = text.replace('&#133;', ' ')
    text = text.replace('&#134;', ' ')
    text = text.replace('&#135;', ' ')
    text = text.replace('&#136;', ' ')
    text = text.replace('&#137;', ' ')
    text = text.replace('&#138;', 'S')
    text = text.replace('&#139;', '<')
    text = text.replace('&#140;', ' ')
    text = text.replace('&#141;', ' ')
    text = text.replace('&#142;', ' ')
    text = text.replace('&#143;', ' ')
    text = text.replace('&#144;', ' ')
    text = text.replace('&#145;', "'")
    text = text.replace('&#146;', "'")
    text = text.replace('&#147;', '"')
    text = text.replace('&#148;', '"')
    text = text.replace('&#149;', ' ')
    text = text.replace('&#150;', '-')
    text = text.replace('&#151;', '-')
    text = text.replace('&#152;', ' ')
    text = text.replace('&#153;', ' ')
    text = text.replace('&#154;', ' ')
    text = text.replace('&#155;', '>')
    text = text.replace('&#156;', ' ')
    text = text.replace('&#157;', ' ')
    text = text.replace('&#158;', 'z')
    text = text.replace('&#159;', 'Y')
    text = text.replace('&#160;', ' ')
    text = text.replace('&#161;', 'i')
    text = text.replace('&#162;', ' ')
    text = text.replace('&#163;', ' ')
    text = text.replace('&#164;', ' ')
    text = text.replace('&#165;', ' ')
    text = text.replace('&#166;', ' ')
    text = text.replace('&#167;', ' ')
    text = text.replace('&#168;', ' ')
    text = text.replace('&#169;', ' ')
    text = text.replace('&#170;', ' ')
    text = text.replace('&#171;', ' ')
    text = text.replace('&#172;', ' ')
    text = text.replace('&#173;', ' ')
    text = text.replace('&#174;', ' ')
    text = text.replace('&#175;', ' ')
    text = text.replace('&#176;', ' ')
    text = text.replace('&#177;', ' ')
    text = text.replace('&#178;', ' ')
    text = text.replace('&#179;', ' ')
    text = text.replace('&#180;', ' ')
    text = text.replace('&#181;', ' ')
    text = text.replace('&#182;', ' ')
    text = text.replace('&#183;', ' ')
    text = text.replace('&#184;', ' ')
    text = text.replace('&#185;', ' ')
    text = text.replace('&#186;', ' ')
    text = text.replace('&#187;', ' ')
    text = text.replace('&#188;', ' ')
    text = text.replace('&#189;', ' ')
    text = text.replace('&#190;', ' ')
    text = text.replace('&#191;', ' ')
    text = text.replace('&#192;', 'A')
    text = text.replace('&#193;', 'A')
    text = text.replace('&#194;', 'A')
    text = text.replace('&#195;', 'A')
    text = text.replace('&#196;', 'A')
    text = text.replace('&#197;', 'A')
    text = text.replace('&#198;', 'AE')
    text = text.replace('&#199;', 'C')
    text = text.replace('&#200;', 'E')
    text = text.replace('&#201;', 'E')
    text = text.replace('&#202;', 'E')
    text = text.replace('&#203;', 'E')
    text = text.replace('&#204;', 'I')
    text = text.replace('&#205;', 'I')
    text = text.replace('&#206;', 'I')
    text = text.replace('&#207;', 'I')
    text = text.replace('&#208;', 'D')
    text = text.replace('&#209;', 'N')
    text = text.replace('&#210;', 'O')
    text = text.replace('&#211;', 'O')
    text = text.replace('&#212;', 'O')
    text = text.replace('&#213;', 'O')
    text = text.replace('&#214;', 'O')
    text = text.replace('&#215;', 'x')
    text = text.replace('&#216;', 'O')
    text = text.replace('&#217;', 'U')
    text = text.replace('&#218;', 'U')
    text = text.replace('&#219;', 'U')
    text = text.replace('&#220;', 'U')
    text = text.replace('&#221;', 'Y')
    text = text.replace('&#222;', 'p')
    text = text.replace('&#223;', 'B')
    text = text.replace('&#224;', 'a')
    text = text.replace('&#225;', 'a')
    text = text.replace('&#226;', 'a')
    text = text.replace('&#227;', 'a')
    text = text.replace('&#228;', 'a')
    text = text.replace('&#229;', 'a')
    text = text.replace('&#230;', 'ae')
    text = text.replace('&#231;', 'c')
    text = text.replace('&#232;', 'e')
    text = text.replace('&#233;', 'e')
    text = text.replace('&#234;', 'e')
    text = text.replace('&#235;', 'e')
    text = text.replace('&#236;', 'i')
    text = text.replace('&#237;', 'i')
    text = text.replace('&#238;', 'i')
    text = text.replace('&#239;', 'i')
    text = text.replace('&#240;', 'o')
    text = text.replace('&#241;', 'n')
    text = text.replace('&#242;', 'o')
    text = text.replace('&#243;', 'o')
    text = text.replace('&#244;', 'o')
    text = text.replace('&#245;', 'o')
    text = text.replace('&#246;', 'o')
    text = text.replace('&#247;', '/ ')
    text = text.replace('&#248;', 'o')
    text = text.replace('&#249;', 'u')
    text = text.replace('&#250;', 'u')
    text = text.replace('&#251;', 'u')
    text = text.replace('&#252;', 'u')
    text = text.replace('&#253;', 'y')
    text = text.replace('&#254;', 'p')
    text = text.replace('&#255;', 'y')
    text = text.replace('&quot;quot;', '"')
    text = text.replace('&amp;amp;', '&')
    text = text.replace('&apos;apos;', "'")
    text = text.replace('&lt;lt;', '<')
    text = text.replace('&gt;gt;', '>')
    text = text.replace('&nbsp;nbsp;', ' ')
    text = text.replace('&iexcl;iexcl;', ' ')
    text = text.replace('&cent;cent;', ' ')
    text = text.replace('&pound;pound;', ' ')
    text = text.replace('&curren;curren;', ' ')
    text = text.replace('&yen;yen;', ' ')
    text = text.replace('&brvbar;brvbar;', ' ')
    text = text.replace('&sect;sect;', ' ')
    text = text.replace('&uml;uml;', ' ')
    text = text.replace('&copy;copy;', ' ')
    text = text.replace('&ordf;ordf;', ' ')
    text = text.replace('&laquo;laquo;', ' ')
    text = text.replace('&not;not;', ' ')
    text = text.replace('&shy;shy;', ' ')
    text = text.replace('&reg;reg;', ' ')
    text = text.replace('&macr;macr;', ' ')
    text = text.replace('&deg;deg;', ' ')
    text = text.replace('&plusmn;plusmn;', ' ')
    text = text.replace('&sup2;sup2;', ' ')
    text = text.replace('&sup3;sup3;', ' ')
    text = text.replace('&acute;acute;', ' ')
    text = text.replace('&micro;micro;', ' ')
    text = text.replace('&para;para;', ' ')
    text = text.replace('&middot;middot;', ' ')
    text = text.replace('&cedil;cedil;', ' ')
    text = text.replace('&sup1;sup1;', ' ')
    text = text.replace('&ordm;ordm;', ' ')
    text = text.replace('&raquo;raquo;', ' ')
    text = text.replace('&frac14;frac14;', ' ')
    text = text.replace('&frac12;frac12;', ' ')
    text = text.replace('&frac34;frac34;', ' ')
    text = text.replace('&iquest;iquest;', ' ')
    text = text.replace('&Agrave;Agrave;', 'A')
    text = text.replace('&Aacute;Aacute;', 'A')
    text = text.replace('&Acirc;Acirc;', 'A')
    text = text.replace('&Atilde;Atilde;', 'A')
    text = text.replace('&Auml;Auml;', 'A')
    text = text.replace('&Aring;Aring;', 'A')
    text = text.replace('&AElig;AElig;', 'AE')
    text = text.replace('&Ccedil;Ccedil;', 'C')
    text = text.replace('&Egrave;Egrave;', 'E')
    text = text.replace('&Eacute;Eacute;', 'E')
    text = text.replace('&Ecirc;Ecirc;', 'E')
    text = text.replace('&Euml;Euml;', 'E')
    text = text.replace('&Igrave;Igrave;', 'I')
    text = text.replace('&Iacute;Iacute;', 'I')
    text = text.replace('&Icirc;Icirc;', 'I')
    text = text.replace('&Iuml;Iuml;', 'I')
    text = text.replace('&ETH;ETH;', 'D')
    text = text.replace('&Ntilde;Ntilde;', 'N')
    text = text.replace('&Ograve;Ograve;', 'O')
    text = text.replace('&Oacute;Oacute;', 'O')
    text = text.replace('&Ocirc;Ocirc;', 'O')
    text = text.replace('&Otilde;Otilde;', 'O')
    text = text.replace('&Ouml;Ouml;', 'O')
    text = text.replace('&times;times;', 'x')
    text = text.replace('&Oslash;Oslash;', 'O')
    text = text.replace('&Ugrave;Ugrave;', 'U')
    text = text.replace('&Uacute;Uacute;', 'U')
    text = text.replace('&Ucirc;Ucirc;', 'U')
    text = text.replace('&Uuml;Uuml;', 'U')
    text = text.replace('&Yacute;Yacute;', 'Y')
    text = text.replace('&THORN;THORN;', ' ')
    text = text.replace('&szlig;szlig;', 'B')
    text = text.replace('&agrave;agrave;', 'a')
    text = text.replace('&aacute;aacute;', 'a')
    text = text.replace('&acirc;acirc;', 'a')
    text = text.replace('&atilde;atilde;', 'a')
    text = text.replace('&auml;auml;', 'a')
    text = text.replace('&aring;aring;', 'a')
    text = text.replace('&aelig;aelig;', 'ae')
    text = text.replace('&ccedil;ccedil;', 'c')
    text = text.replace('&egrave;egrave;', 'e')
    text = text.replace('&eacute;eacute;', 'e')
    text = text.replace('&ecirc;ecirc;', 'e')
    text = text.replace('&euml;euml;', 'e')
    text = text.replace('&igrave;igrave;', 'i')
    text = text.replace('&iacute;iacute;', 'i')
    text = text.replace('&icirc;icirc;', 'i')
    text = text.replace('&iuml;iuml;', 'i')
    text = text.replace('&eth;eth;', 'o')
    text = text.replace('&ntilde;ntilde;', 'n')
    text = text.replace('&ograve;ograve;', 'o')
    text = text.replace('&oacute;oacute;', 'o')
    text = text.replace('&ocirc;ocirc;', 'o')
    text = text.replace('&otilde;otilde;', 'o')
    text = text.replace('&ouml;ouml;', 'o')
    text = text.replace('&divide;divide;', '/')
    text = text.replace('&oslash;oslash;', 'o')
    text = text.replace('&ugrave;ugrave;', 'u')
    text = text.replace('&uacute;uacute;', 'u')
    text = text.replace('&ucirc;ucirc;', 'u')
    text = text.replace('&uuml;uuml;', 'u')
    text = text.replace('&yacute;yacute;', 'y')
    text = text.replace('&thorn;thorn;', 'p')
    text = text.replace('&yuml;yuml;', 'y')
    text = text.replace('&OElig;OElig;', 'CE')
    text = text.replace('&oelig;oelig;', 'ce')
    text = text.replace('&Scaron;Scaron;', 'S')
    text = text.replace('&scaron;scaron;', 's')
    text = text.replace('&Yuml;Yuml;', 'Y')
    text = text.replace('&fnof;fnof;', 'f')
    text = text.replace('&circ;circ;', '')
    text = text.replace('&tilde;tilde;', '')
    text = text.replace('&Alpha;Alpha;', 'A')
    text = text.replace('&Beta;Beta;', 'B')
    text = text.replace('&Gamma;Gamma;', ' ')
    text = text.replace('&Delta;Delta;', ' ')
    text = text.replace('&Epsilon;Epsilon;', 'E')
    text = text.replace('&Zeta;Zeta;', 'Z')
    text = text.replace('&Eta;Eta;', 'H')
    text = text.replace('&Theta;Theta;', 'O')
    text = text.replace('&Iota;Iota;', 'I')
    text = text.replace('&Kappa;Kappa;', 'K')
    text = text.replace('&Lambda;Lambda;', ' ')
    text = text.replace('&Mu;Mu;', 'M')
    text = text.replace('&Nu;Nu;', 'N')
    text = text.replace('&Xi;Xi;', ' ')
    text = text.replace('&Omicron;Omicron;', 'O')
    text = text.replace('&Pi;Pi;', ' ')
    text = text.replace('&Rho;Rho;', 'P')
    text = text.replace('&Sigma;Sigma;', ' ')
    text = text.replace('&Tau;Tau;', 'T')
    text = text.replace('&Upsilon;Upsilon;', 'Y')
    text = text.replace('&Phi;Phi;', ' ')
    text = text.replace('&Chi;Chi;', 'X')
    text = text.replace('&Psi;Psi;', ' ')
    text = text.replace('&Omega;Omega;', ' ')
    text = text.replace('&alpha;alpha;', 'a')
    text = text.replace('&beta;beta;', 'B')
    text = text.replace('&gamma;gamma;', 'y')
    text = text.replace('&delta;delta;', 'd')
    text = text.replace('&epsilon;epsilon;', 'e')
    text = text.replace('&zeta;zeta;', 'z')
    text = text.replace('&eta;eta;', 'n')
    text = text.replace('&theta;theta;', 'O')
    text = text.replace('&iota;iota;', 'I')
    text = text.replace('&kappa;kappa;', 'k')
    text = text.replace('&lambda;lambda;', ' ')
    text = text.replace('&mu;mu;', ' ')
    text = text.replace('&nu;nu;', ' ')
    text = text.replace('&xi;xi;', ' ')
    text = text.replace('&omicron;omicron;', 'o')
    text = text.replace('&pi;pi;', ' ')
    text = text.replace('&rho;rho;', 'p')
    text = text.replace('&sigmaf;sigmaf;', ' ')
    text = text.replace('&sigma;sigma;', ' ')
    text = text.replace('&tau;tau;', 'T')
    text = text.replace('&upsilon;upsilon;', 'u')
    text = text.replace('&phi;phi;', ' ')
    text = text.replace('&chi;chi;', 'X')
    text = text.replace('&psi;psi;', ' ')
    text = text.replace('&omega;omega;', 'w')
    text = text.replace('&thetasym;thetasym;', ' ')
    text = text.replace('&upsih;upsih;', 'Y')
    text = text.replace('&piv;piv;', 'w')
    text = text.replace('&ensp;ensp;', ' ')
    text = text.replace('&emsp;emsp;', ' ')
    text = text.replace('&thinsp;thinsp;', ' ')
    text = text.replace('&zwnj;zwnj;', ' ')
    text = text.replace('&zwj;zwj;', ' ')
    text = text.replace('&lrm;lrm;', ' ')
    text = text.replace('&rlm;rlm;', ' ')
    text = text.replace('&ndash;ndash;', '-')
    text = text.replace('&mdash;mdash;', '-')
    text = text.replace('&lsquo;lsquo;', '')
    text = text.replace('&rsquo;rsquo;', "'")
    text = text.replace('&sbquo;sbquo;', ' ')
    text = text.replace('&ldquo;ldquo;', '"')
    text = text.replace('&rdquo;rdquo;', '"')
    text = text.replace('&bdquo;bdquo;', ' ')
    text = text.replace('&dagger;dagger;', ' ')
    text = text.replace('&Dagger;Dagger;', ' ')
    text = text.replace('&bull;bull;', ' ')
    text = text.replace('&hellip;hellip;', ' ')
    text = text.replace('&permil;permil;', ' ')
    text = text.replace('&prime;prime;', "'")
    text = text.replace('&Prime;Prime;', '"')
    text = text.replace('&lsaquo;lsaquo;', ' ')
    text = text.replace('&rsaquo;rsaquo;', ' ')
    text = text.replace('&oline;oline;', ' ')
    text = text.replace('&frasl;frasl;', '/')
    text = text.replace('&euro;euro;', ' ')
    text = text.replace('&image;image;', ' ')
    text = text.replace('&weierp;weierp;', ' ')
    text = text.replace('&real;real;', ' ')
    text = text.replace('&trade;trade;', ' ')
    text = text.replace('&alefsym;alefsym;', ' ')
    text = text.replace('&larr;larr;', ' ')
    text = text.replace('&uarr;uarr;', ' ')
    text = text.replace('&rarr;rarr;', ' ')
    text = text.replace('&darr;darr;', ' ')
    text = text.replace('&harr;harr;', ' ')
    text = text.replace('&crarr;crarr;', ' ')
    text = text.replace('&lArr;lArr;', ' ')
    text = text.replace('&uArr;uArr;', ' ')
    text = text.replace('&rArr;rArr;', ' ')
    text = text.replace('&dArr;dArr;', ' ')
    text = text.replace('&hArr;hArr;', ' ')
    text = text.replace('&forall;forall;', ' ')
    text = text.replace('&part;part;', ' ')
    text = text.replace('&exist;exist;', ' ')
    text = text.replace('&empty;empty;', ' ')
    text = text.replace('&nabla;nabla;', ' ')
    text = text.replace('&isin;isin;', ' ')
    text = text.replace('&notin;notin;', ' ')
    text = text.replace('&ni;ni;', ' ')
    text = text.replace('&prod;prod;', ' ')
    text = text.replace('&sum;sum;', ' ')
    text = text.replace('&minus;minus;', '-')
    text = text.replace('&lowast;lowast;', ' ')
    text = text.replace('&radic;radic;', ' ')
    text = text.replace('&prop;prop;', ' ')
    text = text.replace('&infin;infin;', ' ')
    text = text.replace('&ang;ang;', ' ')
    text = text.replace('&and;and;', ' ')
    text = text.replace('&or;or;', ' ')
    text = text.replace('&cap;cap;', ' ')
    text = text.replace('&cup;cup;', ' ')
    text = text.replace('&int;int;', ' ')
    text = text.replace('&there4;there4;', ' ')
    text = text.replace('&sim;sim;', ' ')
    text = text.replace('&cong;cong;', ' ')
    text = text.replace('&asymp;asymp;', ' ')
    text = text.replace('&ne;ne;', ' ')
    text = text.replace('&equiv;equiv;', ' ')
    text = text.replace('&le;le;', '<=')
    text = text.replace('&ge;ge;', '>=')
    text = text.replace('&sub;sub;', ' ')
    text = text.replace('&sup;sup;', ' ')
    text = text.replace('&nsub;nsub;', ' ')
    text = text.replace('&sube;sube;', ' ')
    text = text.replace('&supe;supe;', ' ')
    text = text.replace('&oplus;oplus;', ' ')
    text = text.replace('&otimes;otimes;', ' ')
    text = text.replace('&perp;perp;', ' ')
    text = text.replace('&sdot;sdot;', ' ')
    text = text.replace('&lceil;lceil;', ' ')
    text = text.replace('&rceil;rceil;', ' ')
    text = text.replace('&lfloor;lfloor;', ' ')
    text = text.replace('&rfloor;rfloor;', ' ')
    text = text.replace('&lang;lang;', ' ')
    text = text.replace('&rang;rang;', ' ')
    text = text.replace('&loz;loz;', ' ')
    text = text.replace('&spades;spades;', ' ')
    text = text.replace('&clubs;clubs;', ' ')
    text = text.replace('&hearts;hearts;', ' ')
    text = text.replace('&diams;diams;', ' ')
    text = text.replace('&quot;', '"')
    text = text.replace('&amp;', '&')
    text = text.replace('&apos;', "'")
    text = text.replace('&lt;', '<')
    text = text.replace('&gt;', '>')
    text = text.replace('&nbsp;', ' ')
    text = text.replace('&iexcl;', ' ')
    text = text.replace('&cent;', ' ')
    text = text.replace('&pound;', ' ')
    text = text.replace('&curren;', ' ')
    text = text.replace('&yen;', ' ')
    text = text.replace('&brvbar;', ' ')
    text = text.replace('&sect;', ' ')
    text = text.replace('&uml;', ' ')
    text = text.replace('&copy;', ' ')
    text = text.replace('&ordf;', ' ')
    text = text.replace('&laquo;', ' ')
    text = text.replace('&not;', ' ')
    text = text.replace('&shy;', ' ')
    text = text.replace('&reg;', ' ')
    text = text.replace('&macr;', ' ')
    text = text.replace('&deg;', ' ')
    text = text.replace('&plusmn;', ' ')
    text = text.replace('&sup2;', ' ')
    text = text.replace('&sup3;', ' ')
    text = text.replace('&acute;', ' ')
    text = text.replace('&micro;', ' ')
    text = text.replace('&para;', ' ')
    text = text.replace('&middot;', ' ')
    text = text.replace('&cedil;', ' ')
    text = text.replace('&sup1;', ' ')
    text = text.replace('&ordm;', ' ')
    text = text.replace('&raquo;', ' ')
    text = text.replace('&frac14;', ' ')
    text = text.replace('&frac12;', ' ')
    text = text.replace('&frac34;', ' ')
    text = text.replace('&iquest;', ' ')
    text = text.replace('&Agrave;', 'A')
    text = text.replace('&Aacute;', 'A')
    text = text.replace('&Acirc;', 'A')
    text = text.replace('&Atilde;', 'A')
    text = text.replace('&Auml;', 'A')
    text = text.replace('&Aring;', 'A')
    text = text.replace('&AElig;', 'AE')
    text = text.replace('&Ccedil;', 'C')
    text = text.replace('&Egrave;', 'E')
    text = text.replace('&Eacute;', 'E')
    text = text.replace('&Ecirc;', 'E')
    text = text.replace('&Euml;', 'E')
    text = text.replace('&Igrave;', 'I')
    text = text.replace('&Iacute;', 'I')
    text = text.replace('&Icirc;', 'I')
    text = text.replace('&Iuml;', 'I')
    text = text.replace('&ETH;', 'D')
    text = text.replace('&Ntilde;', 'N')
    text = text.replace('&Ograve;', 'O')
    text = text.replace('&Oacute;', 'O')
    text = text.replace('&Ocirc;', 'O')
    text = text.replace('&Otilde;', 'O')
    text = text.replace('&Ouml;', 'O')
    text = text.replace('&times;', 'x')
    text = text.replace('&Oslash;', 'O')
    text = text.replace('&Ugrave;', 'U')
    text = text.replace('&Uacute;', 'U')
    text = text.replace('&Ucirc;', 'U')
    text = text.replace('&Uuml;', 'U')
    text = text.replace('&Yacute;', 'Y')
    text = text.replace('&THORN;', ' ')
    text = text.replace('&szlig;', 'B')
    text = text.replace('&agrave;', 'a')
    text = text.replace('&aacute;', 'a')
    text = text.replace('&acirc;', 'a')
    text = text.replace('&atilde;', 'a')
    text = text.replace('&auml;', 'a')
    text = text.replace('&aring;', 'a')
    text = text.replace('&aelig;', 'ae')
    text = text.replace('&ccedil;', 'c')
    text = text.replace('&egrave;', 'e')
    text = text.replace('&eacute;', 'e')
    text = text.replace('&ecirc;', 'e')
    text = text.replace('&euml;', 'e')
    text = text.replace('&igrave;', 'i')
    text = text.replace('&iacute;', 'i')
    text = text.replace('&icirc;', 'i')
    text = text.replace('&iuml;', 'i')
    text = text.replace('&eth;', 'o')
    text = text.replace('&ntilde;', 'n')
    text = text.replace('&ograve;', 'o')
    text = text.replace('&oacute;', 'o')
    text = text.replace('&ocirc;', 'o')
    text = text.replace('&otilde;', 'o')
    text = text.replace('&ouml;', 'o')
    text = text.replace('&divide;', '/')
    text = text.replace('&oslash;', 'o')
    text = text.replace('&ugrave;', 'u')
    text = text.replace('&uacute;', 'u')
    text = text.replace('&ucirc;', 'u')
    text = text.replace('&uuml;', 'u')
    text = text.replace('&yacute;', 'y')
    text = text.replace('&thorn;', 'p')
    text = text.replace('&yuml;', 'y')
    text = text.replace('&OElig;', 'CE')
    text = text.replace('&oelig;', 'ce')
    text = text.replace('&Scaron;', 'S')
    text = text.replace('&scaron;', 's')
    text = text.replace('&Yuml;', 'Y')
    text = text.replace('&fnof;', 'f')
    text = text.replace('&circ;', '')
    text = text.replace('&tilde;', '')
    text = text.replace('&Alpha;', 'A')
    text = text.replace('&Beta;', 'B')
    text = text.replace('&Gamma;', ' ')
    text = text.replace('&Delta;', ' ')
    text = text.replace('&Epsilon;', 'E')
    text = text.replace('&Zeta;', 'Z')
    text = text.replace('&Eta;', 'H')
    text = text.replace('&Theta;', 'O')
    text = text.replace('&Iota;', 'I')
    text = text.replace('&Kappa;', 'K')
    text = text.replace('&Lambda;', ' ')
    text = text.replace('&Mu;', 'M')
    text = text.replace('&Nu;', 'N')
    text = text.replace('&Xi;', ' ')
    text = text.replace('&Omicron;', 'O')
    text = text.replace('&Pi;', ' ')
    text = text.replace('&Rho;', 'P')
    text = text.replace('&Sigma;', ' ')
    text = text.replace('&Tau;', 'T')
    text = text.replace('&Upsilon;', 'Y')
    text = text.replace('&Phi;', ' ')
    text = text.replace('&Chi;', 'X')
    text = text.replace('&Psi;', ' ')
    text = text.replace('&Omega;', ' ')
    text = text.replace('&alpha;', 'a')
    text = text.replace('&beta;', 'B')
    text = text.replace('&gamma;', 'y')
    text = text.replace('&delta;', 'd')
    text = text.replace('&epsilon;', 'e')
    text = text.replace('&zeta;', 'z')
    text = text.replace('&eta;', 'n')
    text = text.replace('&theta;', 'O')
    text = text.replace('&iota;', 'I')
    text = text.replace('&kappa;', 'k')
    text = text.replace('&lambda;', ' ')
    text = text.replace('&mu;', ' ')
    text = text.replace('&nu;', ' ')
    text = text.replace('&xi;', ' ')
    text = text.replace('&omicron;', 'o')
    text = text.replace('&pi;', ' ')
    text = text.replace('&rho;', 'p')
    text = text.replace('&sigmaf;', ' ')
    text = text.replace('&sigma;', ' ')
    text = text.replace('&tau;', 'T')
    text = text.replace('&upsilon;', 'u')
    text = text.replace('&phi;', ' ')
    text = text.replace('&chi;', 'X')
    text = text.replace('&psi;', ' ')
    text = text.replace('&omega;', 'w')
    text = text.replace('&thetasym;', ' ')
    text = text.replace('&upsih;', 'Y')
    text = text.replace('&piv;', 'w')
    text = text.replace('&ensp;', ' ')
    text = text.replace('&emsp;', ' ')
    text = text.replace('&thinsp;', ' ')
    text = text.replace('&zwnj;', ' ')
    text = text.replace('&zwj;', ' ')
    text = text.replace('&lrm;', ' ')
    text = text.replace('&rlm;', ' ')
    text = text.replace('&ndash;', '-')
    text = text.replace('&mdash;', '-')
    text = text.replace('&lsquo;', '')
    text = text.replace('&rsquo;', "'")
    text = text.replace('&sbquo;', ' ')
    text = text.replace('&ldquo;', '"')
    text = text.replace('&rdquo;', '"')
    text = text.replace('&bdquo;', ' ')
    text = text.replace('&dagger;', ' ')
    text = text.replace('&Dagger;', ' ')
    text = text.replace('&bull;', ' ')
    text = text.replace('&hellip;', ' ')
    text = text.replace('&permil;', ' ')
    text = text.replace('&prime;', "'")
    text = text.replace('&Prime;', '"')
    text = text.replace('&lsaquo;', ' ')
    text = text.replace('&rsaquo;', ' ')
    text = text.replace('&oline;', ' ')
    text = text.replace('&frasl;', '/')
    text = text.replace('&euro;', ' ')
    text = text.replace('&image;', ' ')
    text = text.replace('&weierp;', ' ')
    text = text.replace('&real;', ' ')
    text = text.replace('&trade;', ' ')
    text = text.replace('&alefsym;', ' ')
    text = text.replace('&larr;', ' ')
    text = text.replace('&uarr;', ' ')
    text = text.replace('&rarr;', ' ')
    text = text.replace('&darr;', ' ')
    text = text.replace('&harr;', ' ')
    text = text.replace('&crarr;', ' ')
    text = text.replace('&lArr;', ' ')
    text = text.replace('&uArr;', ' ')
    text = text.replace('&rArr;', ' ')
    text = text.replace('&dArr;', ' ')
    text = text.replace('&hArr;', ' ')
    text = text.replace('&forall;', ' ')
    text = text.replace('&part;', ' ')
    text = text.replace('&exist;', ' ')
    text = text.replace('&empty;', ' ')
    text = text.replace('&nabla;', ' ')
    text = text.replace('&isin;', ' ')
    text = text.replace('&notin;', ' ')
    text = text.replace('&ni;', ' ')
    text = text.replace('&prod;', ' ')
    text = text.replace('&sum;', ' ')
    text = text.replace('&minus;', '-')
    text = text.replace('&lowast;', ' ')
    text = text.replace('&radic;', ' ')
    text = text.replace('&prop;', ' ')
    text = text.replace('&infin;', ' ')
    text = text.replace('&ang;', ' ')
    text = text.replace('&and;', ' ')
    text = text.replace('&or;', ' ')
    text = text.replace('&cap;', ' ')
    text = text.replace('&cup;', ' ')
    text = text.replace('&int;', ' ')
    text = text.replace('&there4;', ' ')
    text = text.replace('&sim;', ' ')
    text = text.replace('&cong;', ' ')
    text = text.replace('&asymp;', ' ')
    text = text.replace('&ne;', ' ')
    text = text.replace('&equiv;', ' ')
    text = text.replace('&le;', '<=')
    text = text.replace('&ge;', '>=')
    text = text.replace('&sub;', ' ')
    text = text.replace('&sup;', ' ')
    text = text.replace('&nsub;', ' ')
    text = text.replace('&sube;', ' ')
    text = text.replace('&supe;', ' ')
    text = text.replace('&oplus;', ' ')
    text = text.replace('&otimes;', ' ')
    text = text.replace('&perp;', ' ')
    text = text.replace('&sdot;', ' ')
    text = text.replace('&lceil;', ' ')
    text = text.replace('&rceil;', ' ')
    text = text.replace('&lfloor;', ' ')
    text = text.replace('&rfloor;', ' ')
    text = text.replace('&lang;', ' ')
    text = text.replace('&rang;', ' ')
    text = text.replace('&loz;', ' ')
    text = text.replace('&spades;', ' ')
    text = text.replace('&clubs;', ' ')
    text = text.replace('&hearts;', ' ')
    text = text.replace('&diams;', ' ')
    text = text.replace('&#8226;',' ')
    text = text.replace('&#8220;','"')
    text = text.replace('&#8221;','"')
    text = text.replace('&#8217;',"'")
    text = text.replace('&#8216;',"'")
    text = re.sub(r'&#.*?;', ' ', text)
    return text

def html_to_text(html):

    def fix_text(text):
        text = re.sub(r'<.*?>', '', text)
        text = re.sub('\t',' ',text)
        text = re.sub(' +',' ',text) #Remove multiple spaces
        text = text.strip()
        return text
    
    html = html_ascii_convert(html)
    html = re.sub(' +',' ',html) #Remove multiple spaces
    html = html.replace('<body>','\n<body>')
    html = html.replace('<div ','\n<div ')
    html = html.replace('<TABLE', '<table')
    html = html.replace('/TABLE>', '/table>')
    html = html.replace('<TR', '<tr')
    html = html.replace('</TR>', '</tr>')
    html = html.replace('<TD', '<td')
    html = html.replace('</TD>', '</td>')
    html = html.replace('<TH', '<td')
    html = html.replace('</TH>', '</td>')
    html = html.replace('<th', '<td')
    html = html.replace('</th>', '</td>')
    
    new_html = ''

    if '<table' in html and '</table>' in html:
        
        tables = html.split('<table')
        
        beforefirsttable = tables[0].strip()
        beforefirsttable = fix_text(beforefirsttable)
        
        new_html = new_html+'\n'+beforefirsttable

        for t,table in enumerate(tables):
            
            try:
                aftertable = table.split('/table>')[1]
            except Exception:
                aftertable = ''
            aftertable = fix_text(aftertable)
            
            if t > 0:
                
                table = table.split('/table>')[0]
                table = '<table'+table
                if table.endswith('<'): table = table[0:-1]
                
                rows = table.split('<tr')

                beforefirstrow = rows[0].strip()
                beforefirstrow = fix_text(beforefirstrow)
                
                newtable = ''
                for r,row in enumerate(rows):
                    if r > 0:

                        row = row.split('/tr>')[0]
                        row = '<tr'+row
                        if row.endswith('<'): row = row[0:-1]

                        columns = row.split('<td')

                        beforefirstcolumn = columns[0].strip()

                        newrow = ''
                        for c,column in enumerate(columns):

                            if c > 0:

                                column = column.split('/td>')[0].strip()
                                column = '<td'+column
                                if column.endswith('<'): column = column[0:-1]
                                
                                column = fix_text(column)
                                
                                #newrow = newrow+'|'+column # Split items in each column by a | sign
                                newrow = newrow.strip()+' '+column.strip() # Split items in each column by a space
                                
                                
                        newrow = re.sub(' +',' ',newrow) #Remove multiple spaces
                        newtable = newtable + '\n' + newrow
                        
                if beforefirstrow != '':
                    newtable = beforefirstrow.strip() + '\n' + newtable.strip()
                newtable = newtable.strip()
                new_html = new_html.strip() + '\n' + newtable.strip()
                
            new_html = new_html.strip() + '\n' + aftertable.strip()

        new_html = new_html.strip()
        new_html = new_html.replace(' )',')')
        new_html = new_html.replace('|)',')|')
    else:
        new_html = fix_text(html)
    
    #### GET RID OF EXTRA TAGS THAT SPILLED OVER ONTO THE NEXT LINE

    html = new_html.splitlines()
    new_html = []
    skipnextline = 0
    for l,line in enumerate(html):
        newline = ''
        if '<' in line:
            try:
                line_plus1 =  html[l+1]
            except Exception:
                line_plus1 = ''
            if '>' in line_plus1:
                newline = line+' '+line_plus1
                line = fix_text(newline)
        line = line.strip()
        
        if line != '':
            if skipnextline == 0:
                new_html.append(line)
            else:
                skipnextline = 0
        if newline != '':
            skipnextline = 1
                
    new_html = '\n'.join(new_html)
    
    return new_html